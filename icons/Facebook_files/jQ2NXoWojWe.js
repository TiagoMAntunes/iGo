if (self.CavalryLogger) { CavalryLogger.start_js(["nL1f1"]); }

__d("addDelightedTextInEditorState",["EditorState","TextDelightInComposerController","TextDelightSurface"],(function(a,b,c,d,e,f){"use strict";var g=b("TextDelightInComposerController").matcher;function a(a,c,d){d===void 0&&(d=!1);if(!g)return a;return d?g.matchLastWord(a,"",b("TextDelightSurface").COMMENT):g.applyTextDelightEntity(a,c,"",b("TextDelightSurface").COMMENT)}e.exports=a}),null);
__d("getUpgradedUFI2DelightsComposerPlugin",["DraftEntity","EditorState","React","TextDelightConfig","TextDelightInComposerGating","TextDelightSpan.react","TextDelightSurface","UnicodeUtils","addDelightedTextInEditorState","clearTimeout","getEntityMatcher","installUFI2ComposerInputDecorators","keyCommandBackspaceDelight","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("TextDelightConfig").composerOptions,h=null;function i(a,b,c){a.inputProps.onComposerStateChange(function(d){var e=babelHelpers["extends"]({},d,b(d)),f=e.inputState;switch(f.__type){case"editor-state-based":d=d.inputState;if(d.__type!=="editor-state-based")return e;j(a,f.editorState,d.editorState,c);return k(e,d.editorState,!1);default:return e}})}function j(a,c,d,e){__p&&__p();if(d.getCurrentContent()!==c.getCurrentContent()){h&&b("clearTimeout")(h);if(g.autoHighlightThresholdMs>0){var f=b("setTimeoutAcrossTransitions")(function(){a.inputProps.onComposerStateChange(function(a){return k(a,null,!0)})},g.autoHighlightThresholdMs);h=f;e.addSubscriptions({remove:function(){b("clearTimeout")(f)}})}}}function k(a,c,d){var e=a.inputState;if(e.__type!=="editor-state-based")return a;c=b("addDelightedTextInEditorState")(e.editorState,c||e.editorState,d);return c===e.editorState?a:babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:c})})}function l(a,c,d){__p&&__p();if(!b("TextDelightInComposerGating").isBackspaceEnabled(b("TextDelightSurface").COMMENT))return"not-handled";var e=a.composerState.inputState,f=null;if(e.__type!=="editor-state-based")return"not-handled";c==="backspace"&&(f=b("keyCommandBackspaceDelight")(d));if(!f)return"not-handled";a.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:f||e.editorState})})});return"handled"}function m(a,b,c){var d=l(a,b,c);return d==="not-handled"?a.handleKeyCommand?a.handleKeyCommand(b,c):"not-handled":d}function n(a){a.onComposerStateChange(function(a){var c=a.inputState;if(c.__type!=="editor-state-based")return a;var d=c.editorState;return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{editorState:b("EditorState").forceSelection(d,d.getSelection())})})})}function a(a){__p&&__p();return{installPlugin:function(a){__p&&__p();a.onInstallContentBlockToTextWithEntitiesInputMessageMappers(function(a,c,d){__p&&__p();var e=a.getEntityAt(c);if(e==null)return null;e=b("DraftEntity").get(e);if(e.getType()==="DELIGHT"){a=a.getText().slice(c,d);d=e.getData();e=d.campaignID;d=d.disabled;if(d)return null;if(/^\d+$/.test(e))return{message:{ranges:[{entity:{id:e},length:b("UnicodeUtils").strlen(a),offset:c}],text:a}}}return null})},render:function(c,d){var e=c.subscriptionsHandler,f=babelHelpers.objectWithoutPropertiesLoose(c,["subscriptionsHandler"]),g={component:b("TextDelightSpan.react"),props:babelHelpers["extends"]({},a,{triggerChange:function(){return n(f.inputProps)}}),strategy:b("getEntityMatcher")(function(a){return a.getType()==="DELIGHT"})};return b("React").createElement(d,babelHelpers["extends"]({},f,{inputProps:babelHelpers["extends"]({},f.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(f.inputProps.composerState,g),handleKeyCommand:function(a,b){return m(c.inputProps,a,b)},onComposerStateChange:function(a){return i(c,a,e)}})}))}}}e.exports=a}),null);